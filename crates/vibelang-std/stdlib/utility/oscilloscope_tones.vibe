// Utility: Oscilloscope calibration and test tones

// Sweep tone - Frequency sweep for testing
define_synthdef("sweep_tone")
    .param("amp", 0.4)
    .param("gate", 1.0)
    .param("rate", 0.5)
    .body(|amp, gate, rate| {
        let env = envelope()
            .asr(0.01, 1.0, 0.01)
            .gate(gate)
            .cleanup_on_finish()
            .build();

        // LFO sweeping from 100Hz to 5000Hz
        let lfo = sin_osc_ar(rate) * 0.5 + 0.5;
        let freq = 100.0 + lfo * 4900.0;

        sin_osc_ar(freq) * env * amp
    });

// Square test - Square wave test tone
define_synthdef("square_test")
    .param("freq", 440.0)
    .param("amp", 0.35)
    .param("gate", 1.0)
    .body(|freq, amp, gate| {
        let env = envelope()
            .asr(0.01, 1.0, 0.01)
            .gate(gate)
            .cleanup_on_finish()
            .build();

        pulse_ar(freq, 0.5) * env * amp
    });

// Saw test - Sawtooth test tone
define_synthdef("saw_test")
    .param("freq", 440.0)
    .param("amp", 0.35)
    .param("gate", 1.0)
    .body(|freq, amp, gate| {
        let env = envelope()
            .asr(0.01, 1.0, 0.01)
            .gate(gate)
            .cleanup_on_finish()
            .build();

        saw_ar(freq) * env * amp
    });

// Triangle test - Triangle wave test tone
define_synthdef("tri_test")
    .param("freq", 440.0)
    .param("amp", 0.4)
    .param("gate", 1.0)
    .body(|freq, amp, gate| {
        let env = envelope()
            .asr(0.01, 1.0, 0.01)
            .gate(gate)
            .cleanup_on_finish()
            .build();

        lf_tri_ar(freq) * env * amp
    });
