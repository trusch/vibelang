{
  "name": "vibelang-vscode",
  "displayName": "VibeLang",
  "description": "VS Code support for VibeLang music programming language with DAW-style studio interface",
  "version": "0.1.0",
  "publisher": "vibelang",
  "engines": {
    "vscode": "^1.85.0"
  },
  "activationEvents": [
    "onStartupFinished"
  ],
  "categories": [
    "Programming Languages",
    "Formatters",
    "Visualization"
  ],
  "keywords": [
    "music",
    "audio",
    "daw",
    "live coding",
    "supercollider"
  ],
  "icon": "images/icon.png",
  "main": "./out/extension.js",
  "files": [
    "out/**/*",
    "ugen_manifests/**/*",
    "src/data/**/*",
    "syntaxes/**/*",
    "language-configuration.json",
    "images/**/*"
  ],
  "contributes": {
    "languages": [
      {
        "id": "vibe",
        "aliases": [
          "VibeLang",
          "vibe"
        ],
        "extensions": [
          ".vibe"
        ],
        "configuration": "./language-configuration.json"
      }
    ],
    "grammars": [
      {
        "language": "vibe",
        "scopeName": "source.vibe",
        "path": "./syntaxes/vibe.tmLanguage.json"
      }
    ],
    "viewsContainers": {
      "panel": [
        {
          "id": "vibelangMixer",
          "title": "Mixer",
          "icon": "$(dashboard)"
        }
      ]
    },
    "views": {
      "explorer": [
        {
          "id": "vibelang.sessionExplorer",
          "name": "VibeLang Session",
          "icon": "$(pulse)",
          "contextualTitle": "VibeLang Session Explorer"
        }
      ],
      "vibelangMixer": [
        {
          "type": "webview",
          "id": "vibelang.mixerView",
          "name": "Mixer"
        }
      ]
    },
    "viewsWelcome": [
      {
        "view": "vibelang.sessionExplorer",
        "contents": "No VibeLang runtime connected.\n\n[Connect to Runtime](command:vibelang.toggleConnection)\n\nStart a VibeLang session with `vibe run -w your-file.vibe` to see the session structure here."
      }
    ],
    "commands": [
      {
        "command": "vibelang.restartLsp",
        "title": "Restart Language Server",
        "category": "VibeLang"
      },
      {
        "command": "vibelang.toggleConnection",
        "title": "Toggle Runtime Connection",
        "category": "VibeLang",
        "icon": "$(plug)"
      },
      {
        "command": "vibelang.configureConnection",
        "title": "Configure Runtime Connection",
        "category": "VibeLang"
      },
      {
        "command": "vibelang.toggleTransport",
        "title": "Play/Stop",
        "category": "VibeLang",
        "icon": "$(play)"
      },
      {
        "command": "vibelang.startTransport",
        "title": "Start Transport",
        "category": "VibeLang",
        "icon": "$(play)"
      },
      {
        "command": "vibelang.stopTransport",
        "title": "Stop Transport",
        "category": "VibeLang",
        "icon": "$(debug-stop)"
      },
      {
        "command": "vibelang.setBpm",
        "title": "Set BPM",
        "category": "VibeLang"
      },
      {
        "command": "vibelang.seekBeat",
        "title": "Seek to Beat",
        "category": "VibeLang"
      },
      {
        "command": "vibelang.openInspector",
        "title": "Open Inspector Panel",
        "category": "VibeLang",
        "icon": "$(info)"
      },
      {
        "command": "vibelang.openMixer",
        "title": "Open Mixer Panel",
        "category": "VibeLang",
        "icon": "$(dashboard)"
      },
      {
        "command": "vibelang.openArrangement",
        "title": "Open Arrangement Timeline",
        "category": "VibeLang",
        "icon": "$(timeline)"
      },
      {
        "command": "vibelang.openSliders",
        "title": "Open Parameter Sliders",
        "category": "VibeLang"
      },
      {
        "command": "vibelang.formatDocument",
        "title": "Format Document",
        "category": "VibeLang"
      },
      {
        "command": "vibelang.refreshSession",
        "title": "Refresh Session",
        "category": "VibeLang",
        "icon": "$(refresh)"
      },
      {
        "command": "vibelang.goToSource",
        "title": "Go to Source",
        "category": "VibeLang"
      },
      {
        "command": "vibelang.selectEntity",
        "title": "Select Entity",
        "category": "VibeLang"
      },
      {
        "command": "vibelang.startPattern",
        "title": "Start Pattern",
        "category": "VibeLang",
        "icon": "$(play)"
      },
      {
        "command": "vibelang.stopPattern",
        "title": "Stop Pattern",
        "category": "VibeLang",
        "icon": "$(debug-stop)"
      },
      {
        "command": "vibelang.startMelody",
        "title": "Start Melody",
        "category": "VibeLang",
        "icon": "$(play)"
      },
      {
        "command": "vibelang.stopMelody",
        "title": "Stop Melody",
        "category": "VibeLang",
        "icon": "$(debug-stop)"
      },
      {
        "command": "vibelang.startSequence",
        "title": "Start Sequence",
        "category": "VibeLang",
        "icon": "$(play)"
      },
      {
        "command": "vibelang.stopSequence",
        "title": "Stop Sequence",
        "category": "VibeLang",
        "icon": "$(debug-stop)"
      },
      {
        "command": "vibelang.muteGroup",
        "title": "Toggle Mute",
        "category": "VibeLang"
      },
      {
        "command": "vibelang.soloGroup",
        "title": "Toggle Solo",
        "category": "VibeLang"
      },
      {
        "command": "vibelang.openSoundDesigner",
        "title": "Open Sound Designer",
        "category": "VibeLang",
        "icon": "$(waveform)"
      },
      {
        "command": "vibelang.openPatternEditor",
        "title": "Open Pattern Editor",
        "category": "VibeLang",
        "icon": "$(symbol-array)"
      },
      {
        "command": "vibelang.openMelodyEditor",
        "title": "Open Melody Editor (Piano Roll)",
        "category": "VibeLang",
        "icon": "$(piano)"
      },
      {
        "command": "vibelang.openSampleBrowser",
        "title": "Open Sample Browser",
        "category": "VibeLang",
        "icon": "$(folder-library)"
      },
      {
        "command": "vibelang.openEffectRack",
        "title": "Open Effect Rack",
        "category": "VibeLang",
        "icon": "$(circuit-board)"
      },
      {
        "command": "vibelang.bootRuntime",
        "title": "Start VibeLang Runtime",
        "category": "VibeLang",
        "icon": "$(run)"
      },
      {
        "command": "vibelang.killRuntime",
        "title": "Stop VibeLang Runtime",
        "category": "VibeLang",
        "icon": "$(stop)"
      },
      {
        "command": "vibelang.restartRuntime",
        "title": "Restart VibeLang Runtime",
        "category": "VibeLang",
        "icon": "$(refresh)"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "vibelang.refreshSession",
          "when": "view == vibelang.sessionExplorer",
          "group": "navigation"
        },
        {
          "command": "vibelang.openMixer",
          "when": "view == vibelang.sessionExplorer",
          "group": "navigation"
        },
        {
          "command": "vibelang.openInspector",
          "when": "view == vibelang.sessionExplorer",
          "group": "navigation"
        },
        {
          "command": "vibelang.openArrangement",
          "when": "view == vibelang.sessionExplorer",
          "group": "navigation"
        }
      ],
      "view/item/context": [
        {
          "command": "vibelang.startPattern",
          "when": "view == vibelang.sessionExplorer && viewItem == pattern",
          "group": "inline"
        },
        {
          "command": "vibelang.stopPattern",
          "when": "view == vibelang.sessionExplorer && viewItem == pattern",
          "group": "inline"
        },
        {
          "command": "vibelang.openPatternEditor",
          "when": "view == vibelang.sessionExplorer && viewItem == pattern",
          "group": "0_edit"
        },
        {
          "command": "vibelang.startMelody",
          "when": "view == vibelang.sessionExplorer && viewItem == melody",
          "group": "inline"
        },
        {
          "command": "vibelang.stopMelody",
          "when": "view == vibelang.sessionExplorer && viewItem == melody",
          "group": "inline"
        },
        {
          "command": "vibelang.openMelodyEditor",
          "when": "view == vibelang.sessionExplorer && viewItem == melody",
          "group": "0_edit"
        },
        {
          "command": "vibelang.startSequence",
          "when": "view == vibelang.sessionExplorer && viewItem == sequence",
          "group": "inline"
        },
        {
          "command": "vibelang.stopSequence",
          "when": "view == vibelang.sessionExplorer && viewItem == sequence",
          "group": "inline"
        },
        {
          "command": "vibelang.muteGroup",
          "when": "view == vibelang.sessionExplorer && viewItem == group",
          "group": "1_state"
        },
        {
          "command": "vibelang.soloGroup",
          "when": "view == vibelang.sessionExplorer && viewItem == group",
          "group": "1_state"
        },
        {
          "command": "vibelang.goToSource",
          "when": "view == vibelang.sessionExplorer",
          "group": "2_navigation"
        }
      ],
      "editor/title": [
        {
          "command": "vibelang.openSliders",
          "when": "resourceLangId == vibe",
          "group": "navigation"
        }
      ],
      "editor/context": [
        {
          "command": "vibelang.formatDocument",
          "when": "resourceLangId == vibe",
          "group": "1_modification"
        }
      ],
      "commandPalette": [
        {
          "command": "vibelang.toggleConnection",
          "when": "true"
        },
        {
          "command": "vibelang.toggleTransport",
          "when": "true"
        },
        {
          "command": "vibelang.openInspector",
          "when": "true"
        },
        {
          "command": "vibelang.openMixer",
          "when": "true"
        },
        {
          "command": "vibelang.openArrangement",
          "when": "true"
        },
        {
          "command": "vibelang.openSoundDesigner",
          "when": "true"
        },
        {
          "command": "vibelang.openPatternEditor",
          "when": "true"
        },
        {
          "command": "vibelang.openMelodyEditor",
          "when": "true"
        },
        {
          "command": "vibelang.openSampleBrowser",
          "when": "true"
        },
        {
          "command": "vibelang.openEffectRack",
          "when": "true"
        },
        {
          "command": "vibelang.bootRuntime",
          "when": "true"
        },
        {
          "command": "vibelang.killRuntime",
          "when": "true"
        },
        {
          "command": "vibelang.restartRuntime",
          "when": "true"
        }
      ]
    },
    "configuration": {
      "title": "VibeLang",
      "properties": {
        "vibelang.lsp.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable the built-in Language Server for diagnostics, completion, and hover",
          "order": 1
        },
        "vibelang.lsp.diagnostics.enabled": {
          "type": "boolean",
          "default": true,
          "markdownDescription": "Enable real-time diagnostics (errors, warnings, hints)",
          "order": 2
        },
        "vibelang.lsp.diagnostics.delay": {
          "type": "number",
          "default": 300,
          "minimum": 0,
          "maximum": 5000,
          "markdownDescription": "Delay in milliseconds before diagnostics are computed after typing stops. Lower values = faster feedback, higher values = less CPU usage. Set to `0` for instant diagnostics.",
          "order": 3
        },
        "vibelang.lsp.diagnostics.onType": {
          "type": "boolean",
          "default": true,
          "markdownDescription": "Compute diagnostics while typing. When disabled, diagnostics only update on save.",
          "order": 4
        },
        "vibelang.lsp.completion.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable code completion suggestions",
          "order": 5
        },
        "vibelang.lsp.hover.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable hover information (documentation on mouse hover)",
          "order": 6
        },
        "vibelang.lsp.gotoDefinition.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable Go to Definition (Ctrl/Cmd+Click)",
          "order": 7
        },
        "vibelang.lsp.trace.server": {
          "type": "string",
          "enum": ["off", "messages", "verbose"],
          "default": "off",
          "markdownDescription": "Traces communication between VS Code and the language server. Useful for debugging LSP issues. Output appears in `Output > VibeLang Language Server`.",
          "order": 8
        },
        "vibelang.linting.unknownSynthdef": {
          "type": "string",
          "enum": ["error", "warning", "hint", "off"],
          "default": "warning",
          "description": "Severity level for unknown synthdef references",
          "order": 10
        },
        "vibelang.linting.unknownEffect": {
          "type": "string",
          "enum": ["error", "warning", "hint", "off"],
          "default": "warning",
          "description": "Severity level for unknown effect references",
          "order": 11
        },
        "vibelang.linting.unresolvedImport": {
          "type": "string",
          "enum": ["error", "warning", "hint", "off"],
          "default": "error",
          "description": "Severity level for unresolved imports",
          "order": 12
        },
        "vibelang.linting.patternSyntax": {
          "type": "string",
          "enum": ["error", "warning", "hint", "off"],
          "default": "error",
          "description": "Severity level for invalid pattern syntax (step sequences)",
          "order": 13
        },
        "vibelang.linting.melodySyntax": {
          "type": "string",
          "enum": ["error", "warning", "hint", "off"],
          "default": "error",
          "description": "Severity level for invalid melody syntax (note sequences)",
          "order": 14
        },
        "vibelang.linting.unusedVariable": {
          "type": "string",
          "enum": ["error", "warning", "hint", "off"],
          "default": "hint",
          "description": "Severity level for unused variable warnings",
          "order": 15
        },
        "vibelang.runtime.binaryPath": {
          "type": "string",
          "default": "vibe",
          "markdownDescription": "Path to the VibeLang binary (`vibe` command). Can be an absolute path or a command name in PATH.",
          "order": 20
        },
        "vibelang.runtime.host": {
          "type": "string",
          "default": "localhost",
          "description": "VibeLang runtime HTTP API host",
          "order": 21
        },
        "vibelang.runtime.port": {
          "type": "number",
          "default": 1606,
          "minimum": 1,
          "maximum": 65535,
          "description": "VibeLang runtime HTTP API port",
          "order": 22
        },
        "vibelang.runtime.autoConnect": {
          "type": "boolean",
          "default": false,
          "description": "Automatically connect to VibeLang runtime when extension activates",
          "order": 23
        },
        "vibelang.runtime.reconnectOnDisconnect": {
          "type": "boolean",
          "default": true,
          "description": "Automatically attempt to reconnect if connection to runtime is lost",
          "order": 24
        },
        "vibelang.runtime.connectionTimeout": {
          "type": "number",
          "default": 5000,
          "minimum": 1000,
          "maximum": 30000,
          "description": "Connection timeout in milliseconds when connecting to runtime",
          "order": 25
        },
        "vibelang.runtime.pollingInterval": {
          "type": "number",
          "default": 100,
          "minimum": 50,
          "maximum": 1000,
          "markdownDescription": "Interval in milliseconds for polling runtime state (transport position, levels). Lower = smoother UI updates, higher = less network traffic.",
          "order": 26
        },
        "vibelang.format.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable/disable the VibeLang code formatter",
          "order": 30
        },
        "vibelang.format.indentSize": {
          "type": "number",
          "default": 4,
          "minimum": 1,
          "maximum": 8,
          "description": "Number of spaces for indentation",
          "order": 31
        },
        "vibelang.format.insertFinalNewline": {
          "type": "boolean",
          "default": true,
          "description": "Ensure file ends with a newline",
          "order": 32
        },
        "vibelang.format.trimTrailingWhitespace": {
          "type": "boolean",
          "default": true,
          "description": "Remove trailing whitespace from lines",
          "order": 33
        },
        "vibelang.format.patternSpacing": {
          "type": "boolean",
          "default": true,
          "markdownDescription": "Automatically add spaces to pattern strings for readability (groups of 4 steps). Example: `\"x...x...x...x...\"` â†’ `\"x... x... x... x...\"`",
          "order": 34
        },
        "vibelang.format.patternGroupSize": {
          "type": "number",
          "default": 4,
          "minimum": 2,
          "maximum": 16,
          "markdownDescription": "Number of steps per group when formatting patterns. Only applies when `#vibelang.format.patternSpacing#` is enabled.",
          "order": 35
        },
        "vibelang.format.autoImport": {
          "type": "boolean",
          "default": true,
          "markdownDescription": "Automatically add missing imports for stdlib synthdefs when formatting",
          "order": 36
        },
        "vibelang.format.sortImports": {
          "type": "boolean",
          "default": true,
          "markdownDescription": "Sort import statements alphabetically when formatting",
          "order": 37
        },
        "vibelang.editor.parameterHints": {
          "type": "boolean",
          "default": true,
          "description": "Show parameter hints when typing function calls",
          "order": 40
        },
        "vibelang.editor.inlayHints.enabled": {
          "type": "boolean",
          "default": false,
          "description": "Show inlay hints for parameter names and types",
          "order": 41
        },
        "vibelang.editor.codeLens.enabled": {
          "type": "boolean",
          "default": true,
          "markdownDescription": "Show CodeLens above patterns, melodies, and sequences with play/stop controls",
          "order": 42
        },
        "vibelang.studio.mixer.autoOpen": {
          "type": "boolean",
          "default": false,
          "description": "Automatically open the Mixer panel when connecting to runtime",
          "order": 50
        },
        "vibelang.studio.transportBar.showBeatCounter": {
          "type": "boolean",
          "default": true,
          "description": "Show beat counter in the transport status bar",
          "order": 51
        },
        "vibelang.studio.transportBar.showBpm": {
          "type": "boolean",
          "default": true,
          "description": "Show BPM in the transport status bar",
          "order": 52
        },
        "vibelang.studio.sessionExplorer.showSourceLocations": {
          "type": "boolean",
          "default": true,
          "description": "Show source file locations in the Session Explorer tree",
          "order": 53
        },
        "vibelang.studio.mixer.meterRefreshRate": {
          "type": "number",
          "default": 60,
          "minimum": 10,
          "maximum": 120,
          "description": "Level meter refresh rate in frames per second",
          "order": 54
        },
        "vibelang.samples.searchPaths": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "markdownDescription": "Additional directories to search for audio samples. These paths will be shown in the Sample Browser.",
          "order": 60
        },
        "vibelang.samples.previewOnSelect": {
          "type": "boolean",
          "default": true,
          "description": "Automatically preview samples when selected in the Sample Browser",
          "order": 61
        }
      }
    },
    "keybindings": [
      {
        "command": "vibelang.toggleTransport",
        "key": "ctrl+shift+space",
        "mac": "cmd+shift+space",
        "when": "resourceLangId == vibe"
      },
      {
        "command": "vibelang.openInspector",
        "key": "ctrl+shift+i",
        "mac": "cmd+shift+i",
        "when": "resourceLangId == vibe"
      },
      {
        "command": "vibelang.openMixer",
        "key": "ctrl+shift+m",
        "mac": "cmd+shift+m",
        "when": "resourceLangId == vibe"
      },
      {
        "command": "vibelang.openArrangement",
        "key": "ctrl+shift+a",
        "mac": "cmd+shift+a",
        "when": "resourceLangId == vibe"
      },
      {
        "command": "vibelang.openSoundDesigner",
        "key": "ctrl+shift+d",
        "mac": "cmd+shift+d",
        "when": "resourceLangId == vibe"
      },
      {
        "command": "vibelang.openPatternEditor",
        "key": "ctrl+shift+e",
        "mac": "cmd+shift+e",
        "when": "resourceLangId == vibe"
      },
      {
        "command": "vibelang.openMelodyEditor",
        "key": "ctrl+shift+r",
        "mac": "cmd+shift+r",
        "when": "resourceLangId == vibe"
      },
      {
        "command": "vibelang.openSampleBrowser",
        "key": "ctrl+shift+b",
        "mac": "cmd+shift+b",
        "when": "resourceLangId == vibe"
      }
    ]
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "generate-stdlib": "node scripts/generate-stdlib-metadata.js",
    "generate-ugen-functions": "node scripts/add-snake-case-names.js",
    "compile": "npm run generate-stdlib && tsc -p ./",
    "watch": "tsc -watch -p ./"
  },
  "dependencies": {
    "vscode-languageclient": "^9.0.1"
  },
  "devDependencies": {
    "@types/vscode": "^1.85.0",
    "@types/node": "^18.0.0",
    "typescript": "^5.3.0"
  }
}
